<div class="container mx-auto px-4 py-8">
  <nav class="flex mb-8" aria-label="Breadcrumb">
    <ol class="inline-flex items-center space-x-1 md:space-x-3">
      <li class="inline-flex items-center">
        <a href="#" class="inline-flex items-center text-sm font-medium text-gray-700 hover:text-deep-cobalt">
          <i class="pi pi-home mr-2"></i>
          Home
        </a>
      </li>
      <li aria-current="page">
        <div class="flex items-center">
          <i class="pi pi-chevron-right text-gray-400 mx-2"></i>
          <span class="ml-1 text-sm font-medium text-gray-500 md:ml-2">Products</span>
        </div>
      </li>
    </ol>
  </nav>
  
  <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
    <div>
      <h1 class="text-3xl font-bold text-near-black">All Products</h1>
      <p class="text-gray-600 mt-2">Discover our complete collection of professional mobile repair tools</p>
    </div>
    <div class="flex flex-col sm:flex-row gap-4 mt-4 md:mt-0 w-full md:w-auto">
      <div class="flex-1">
        <div class="relative">
          <i class="pi pi-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
          <input 
            type="text" 
            pInputText 
            [(ngModel)]="searchQuery" 
            (input)="onSearchChange()"
            placeholder="Search products..." 
            class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-deep-cobalt focus:border-transparent">
        </div>
      </div>
      <div class="flex flex-col sm:flex-row gap-4">
        <div class="flex items-center">
          <label for="category" class="mr-2 text-gray-700 hidden sm:block">Category:</label>
          <p-dropdown 
            [options]="categories" 
            [(ngModel)]="selectedCategory" 
            (onChange)="onCategoryChange()"
            optionLabel="name" 
            optionValue="value"
            styleClass="w-40"
            placeholder="Select Category">
          </p-dropdown>
        </div>
        <div class="flex items-center">
          <label for="sort" class="mr-2 text-gray-700 hidden sm:block">Sort by:</label>
          <p-dropdown 
            [options]="sortOptions" 
            [(ngModel)]="selectedSort" 
            (onChange)="onSortChange()"
            optionLabel="name" 
            optionValue="value"
            styleClass="w-48"
            placeholder="Sort by">
          </p-dropdown>
        </div>
      </div>
    </div>
  </div>
  
  <div class="mb-4">
    <p class="text-gray-600">Showing {{ filteredProducts.length }} of {{ products.length }} products</p>
  </div>
  
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
    <div class="" *ngFor="let product of filteredProducts | slice:first:first+rows">
      <p-card styleClass="h-full flex flex-col rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100">
        <div class="relative">
          <div class="bg-gray-200 border-2 border-dashed w-full h-48 flex items-center justify-center text-gray-500">
            <div class="text-center">
              <i class="pi pi-image text-3xl"></i>
              <p class="mt-2">{{ product.name }}</p>
            </div>
          </div>
          <div class="absolute top-4 left-4" *ngIf="product.originalPrice !== product.price">
            <span class="bg-emerald-green text-white text-xs font-bold px-2 py-1 rounded-full">SALE</span>
          </div>
          <div class="absolute top-4 right-4">
            <button class="w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-md hover:bg-soft-light-gray transition-colors">
              <i class="pi pi-heart text-gray-600"></i>
            </button>
          </div>
        </div>
        <div class="p-6 flex flex-col flex-grow">
          <div class="flex justify-between items-start">
            <div>
              <h3 class="text-lg font-bold text-near-black mb-1">{{ product.name }}</h3>
              <p class="text-gray-600 text-sm mb-3">{{ product.category }}</p>
            </div>
            <div class="text-right">
              <span class="text-deep-cobalt font-bold text-lg">${{ product.price }}</span>
              <div class="flex items-center" *ngIf="product.originalPrice !== product.price">
                <span class="text-gray-500 text-sm line-through mr-2">${{ product.originalPrice }}</span>
                <span class="bg-emerald-green text-white text-xs px-1 rounded">-{{ calculateDiscountPercentage(product.originalPrice, product.price) }}%</span>
              </div>
            </div>
          </div>
          <p class="text-gray-700 text-sm mb-4 flex-grow">{{ product.description }}</p>
          <div class="flex items-center mb-4">
            <div class="flex text-yellow-400">
              <i class="pi pi-star-fill"></i>
              <i class="pi pi-star-fill"></i>
              <i class="pi pi-star-fill"></i>
              <i class="pi pi-star-fill"></i>
              <i class="pi pi-star-half-fill" *ngIf="product.rating % 1 !== 0"></i>
              <i class="pi pi-star-fill" *ngIf="product.rating % 1 === 0"></i>
            </div>
            <span class="text-gray-600 text-sm ml-2">({{ product.reviews }})</span>
          </div>
          <div class="flex gap-2 mt-auto">
            <p-button 
              label="Add to Cart" 
              icon="pi pi-shopping-cart" 
              styleClass="flex-grow bg-deep-cobalt border-deep-cobalt hover:bg-blue-800 hover:border-blue-800 text-white py-2" 
              [rounded]="false">
            </p-button>
            <button class="w-12 h-12 bg-soft-light-gray rounded-lg flex items-center justify-center hover:bg-gray-200 transition-colors">
              <i class="pi pi-search text-gray-600"></i>
            </button>
          </div>
        </div>
      </p-card>
    </div>
  </div>
  
  <div class="mt-12" *ngIf="filteredProducts.length > rows">
    <p-paginator 
      [rows]="rows" 
      [totalRecords]="filteredProducts.length" 
      [first]="first"
      (onPageChange)="onPageChange($event)"
      [rowsPerPageOptions]="[4, 8, 12, 16]"
      styleClass="bg-white border border-gray-200 rounded-lg">
    </p-paginator>
  </div>
  
  <div class="mt-12 text-center" *ngIf="filteredProducts.length === 0">
    <i class="pi pi-search text-4xl text-gray-400 mb-4"></i>
    <h3 class="text-xl font-semibold text-gray-700">No products found</h3>
    <p class="text-gray-600 mt-2">Try adjusting your search or filter criteria</p>
  </div>
</div>